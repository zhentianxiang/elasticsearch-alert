# 规则名称（便于区分与告警标题展示）
name: "indc-event-live-server ERROR 日志告警"

# 规则说明（会出现在告警正文开头，推荐写清监控目的）
description: "针对 indc-event-live-server 应用的 ERROR 级别日志进行重点监控"

# 匹配的索引模式（支持通配符 *）
index: "k8s-app-indc-event-live-server-*"

# 调度表达式：每 1 分钟评估一次
cron: "0 */1 * * * *"

# 时间窗：最近 5 分钟
timeWindow: "5m"

# 告警级别：该核心应用的错误按 High 处理
severity: "High"

# 查询 DSL：限制在目标应用，并匹配 ERROR/Exception 关键字
dsl:
  bool:
    filter:
      - term:
          kubernetes_labels_app.keyword: "indc-event-live-server"
      - query_string:
          query: 'message: "*ERROR*" OR message: "*Error*" OR message: "*Exception*" OR message: "*Throwable*"'
          analyze_wildcard: true

# 阈值：该服务一旦有少量 ERROR 即希望告警，可设置略低
threshold:
  countGt: 5

# 去重/静默期
dedup:
  quietPeriod: "10m"

# 通知渠道
alerts:
  channels: ["feishu", "dingtalk", "wechat", "email", "console"]


